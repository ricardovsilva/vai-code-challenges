Started GET "/" for ::1 at 2020-03-18 11:13:07 -0300
  [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/railties-6.0.2.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/railties-6.0.2.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 4.6ms | Allocations: 406)
Completed 200 OK in 11ms (Views: 8.6ms | ActiveRecord: 0.0ms | Allocations: 2243)


Started GET "/favicon.ico" for ::1 at 2020-03-18 11:13:07 -0300
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (6.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (6.0.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.2) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.2) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:83:in `call'
railties (6.0.2.1) lib/rails/engine.rb:526:in `call'
puma (4.3.3) lib/puma/configuration.rb:228:in `call'
puma (4.3.3) lib/puma/server.rb:682:in `handle_request'
puma (4.3.3) lib/puma/server.rb:472:in `process_client'
puma (4.3.3) lib/puma/server.rb:328:in `block in run'
puma (4.3.3) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (12.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateImages (20200318142845)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "images" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "description" varchar, "owner" varchar, "metadata" blob, "url" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20200318142845"]]
  [1m[35m (4.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-03-18 14:44:30.442201"], ["updated_at", "2020-03-18 14:44:30.442201"]]
  [1m[35m (4.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/images" for 127.0.0.1 at 2020-03-18 11:47:40 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (uninitialized constant ImagesController
Did you mean?  ImageController):
  
activesupport (6.0.2.1) lib/active_support/inflector/methods.rb:282:in `const_get'
activesupport (6.0.2.1) lib/active_support/inflector/methods.rb:282:in `block in constantize'
activesupport (6.0.2.1) lib/active_support/inflector/methods.rb:280:in `each'
activesupport (6.0.2.1) lib/active_support/inflector/methods.rb:280:in `inject'
activesupport (6.0.2.1) lib/active_support/inflector/methods.rb:280:in `constantize'
activesupport (6.0.2.1) lib/active_support/dependencies/zeitwerk_integration.rb:19:in `constantize'
actionpack (6.0.2.1) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (6.0.2.1) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (6.0.2.1) lib/action_dispatch/routing/route_set.rb:45:in `controller'
actionpack (6.0.2.1) lib/action_dispatch/routing/route_set.rb:31:in `serve'
actionpack (6.0.2.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.2.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.2.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.2.1) lib/action_dispatch/routing/route_set.rb:837:in `call'
rack (2.2.2) lib/rack/etag.rb:27:in `call'
rack (2.2.2) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.2) lib/rack/head.rb:12:in `call'
activerecord (6.0.2.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.2.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (6.0.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.2) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.2) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:83:in `call'
railties (6.0.2.1) lib/rails/engine.rb:526:in `call'
puma (4.3.3) lib/puma/configuration.rb:228:in `call'
puma (4.3.3) lib/puma/server.rb:682:in `handle_request'
puma (4.3.3) lib/puma/server.rb:472:in `process_client'
puma (4.3.3) lib/puma/server.rb:328:in `block in run'
puma (4.3.3) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/images" for 127.0.0.1 at 2020-03-18 11:48:10 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms | Allocations: 1817)


  
NameError (uninitialized constant ImageController::Images):
  
app/controllers/image_controller.rb:7:in `all'
Started GET "/images" for 127.0.0.1 at 2020-03-18 11:49:17 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms | Allocations: 424)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateActiveStorageTables (20200318152136)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20200318152136"]]
  [1m[35m (8.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "foo"], ["owner", "ricardo"], ["created_at", "2020-03-18 15:28:44.350672"], ["updated_at", "2020-03-18 15:28:44.350672"]]
  [1m[35m (3.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "bar"], ["owner", "ricardo"], ["created_at", "2020-03-18 15:30:26.692307"], ["updated_at", "2020-03-18 15:30:26.692307"]]
  [1m[35m (4.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Started POST "/" for ::1 at 2020-03-18 12:41:18 -0300
  [1m[35m (0.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/"):
  
actionpack (6.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (6.0.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.2) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.2) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:83:in `call'
railties (6.0.2.1) lib/rails/engine.rb:526:in `call'
puma (4.3.3) lib/puma/configuration.rb:228:in `call'
puma (4.3.3) lib/puma/server.rb:682:in `handle_request'
puma (4.3.3) lib/puma/server.rb:472:in `process_client'
puma (4.3.3) lib/puma/server.rb:328:in `block in run'
puma (4.3.3) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/image" for ::1 at 2020-03-18 12:41:25 -0300
  
ActionController::RoutingError (No route matches [POST] "/image"):
  
actionpack (6.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (6.0.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.2) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.2) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:83:in `call'
railties (6.0.2.1) lib/rails/engine.rb:526:in `call'
puma (4.3.3) lib/puma/configuration.rb:228:in `call'
puma (4.3.3) lib/puma/server.rb:682:in `handle_request'
puma (4.3.3) lib/puma/server.rb:472:in `process_client'
puma (4.3.3) lib/puma/server.rb:328:in `block in run'
puma (4.3.3) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/images" for ::1 at 2020-03-18 12:41:28 -0300
  
SyntaxError (/home/ricardo/git/vai-code-challenges/src/image_service/app/controllers/image_controller.rb:19: syntax error, unexpected `end', expecting end-of-input):
  
app/controllers/image_controller.rb:19: syntax error, unexpected `end', expecting end-of-input
app/controllers/image_controller.rb:19: syntax error, unexpected `end', expecting end-of-input
Started POST "/images" for ::1 at 2020-03-18 12:41:48 -0300
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f66847c6770 @tempfile=#<Tempfile:/tmp/RackMultipart20200318-31394-1jyyldt.jpeg>, @original_filename="rails.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"rails.jpeg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"iron rails", "owner"=>"Ricardo da Verdade Silva"}
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 149)


  
ActionController::ParameterMissing (param is missing or the value is empty: image):
  
app/controllers/image_controller.rb:16:in `save_image_params'
app/controllers/image_controller.rb:11:in `save'
Started POST "/images" for ::1 at 2020-03-18 12:43:02 -0300
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x0000561c6754df10 @tempfile=#<Tempfile:/tmp/RackMultipart20200318-31394-1pd8qxy.jpeg>, @original_filename="rails.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"rails.jpeg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"iron rails", "owner"=>"Ricardo da Verdade Silva"}
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 112)


  
ActionController::ParameterMissing (param is missing or the value is empty: image):
  
app/controllers/image_controller.rb:16:in `save_image_params'
app/controllers/image_controller.rb:11:in `save'
Started POST "/images" for ::1 at 2020-03-18 12:43:17 -0300
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f01603a1e30 @tempfile=#<Tempfile:/tmp/RackMultipart20200318-31695-i4s3i9.jpeg>, @original_filename="rails.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"rails.jpeg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"iron rails", "owner"=>"Ricardo da Verdade Silva"}
[31mUnpermitted parameter: :file[0m
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 862)


  
NoMethodError (undefined method `save' for #<ActionController::Parameters:0x00007f0160392ea8>):
  
app/controllers/image_controller.rb:11:in `save'
Started POST "/images" for ::1 at 2020-03-18 12:43:59 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fbf303a1438 @tempfile=#<Tempfile:/tmp/RackMultipart20200318-31828-66r24o.jpeg>, @original_filename="rails.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"rails.jpeg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"iron rails", "owner"=>"Ricardo da Verdade Silva"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "iron rails"], ["owner", "Ricardo da Verdade Silva"], ["created_at", "2020-03-18 15:43:59.900011"], ["updated_at", "2020-03-18 15:43:59.900011"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "r9orh3038h63nn1dm37wf9j5vw0j"], ["filename", "rails.jpeg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 210360], ["checksum", "ZU7TJ/IALb+pBSV8Zsk84w=="], ["created_at", "2020-03-18 15:43:59.908118"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 3], ["blob_id", 1], ["created_at", "2020-03-18 15:43:59.910487"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-18 15:43:59.912379"], ["id", 3]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (4.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: r9orh3038h63nn1dm37wf9j5vw0j (checksum: ZU7TJ/IALb+pBSV8Zsk84w==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: a34db5c7-c503-40e6-9b28-63101d3e2120) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007fbf301f75b0 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/1>>
Completed 204 No Content in 126ms (ActiveRecord: 7.3ms | Allocations: 69003)


  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a34db5c7-c503-40e6-9b28-63101d3e2120] Performing ActiveStorage::AnalyzeJob (Job ID: a34db5c7-c503-40e6-9b28-63101d3e2120) from Async(active_storage_analysis) enqueued at 2020-03-18T15:43:59Z with arguments: #<GlobalID:0x00007fbf30103168 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [a34db5c7-c503-40e6-9b28-63101d3e2120] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: r9orh3038h63nn1dm37wf9j5vw0j[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a34db5c7-c503-40e6-9b28-63101d3e2120] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [a34db5c7-c503-40e6-9b28-63101d3e2120]   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a34db5c7-c503-40e6-9b28-63101d3e2120]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a34db5c7-c503-40e6-9b28-63101d3e2120]   [1m[35m (9.0ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a34db5c7-c503-40e6-9b28-63101d3e2120] Performed ActiveStorage::AnalyzeJob (Job ID: a34db5c7-c503-40e6-9b28-63101d3e2120) from Async(active_storage_analysis) in 166.37ms
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/images" for 127.0.0.1 at 2020-03-19 09:51:31 -0300
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007efec424b890 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-22455-1uf1lef.jpeg>, @original_filename="rails.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"rails.jpeg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
[31mUnpermitted parameter: :image[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
Completed 204 No Content in 133ms (ActiveRecord: 1.0ms | Allocations: 189882)


Started POST "/images" for 127.0.0.1 at 2020-03-19 09:51:51 -0300
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007efebc1134a8 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-22455-1f4tg1l.jpeg>, @original_filename="rails.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"rails.jpeg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 12:51:51.761464"], ["updated_at", "2020-03-19 12:51:51.761464"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "y9noxitqeijr813wackelnqlklub"], ["filename", "rails.jpeg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 210360], ["checksum", "ZU7TJ/IALb+pBSV8Zsk84w=="], ["created_at", "2020-03-19 12:51:51.768886"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4], ["blob_id", 2], ["created_at", "2020-03-19 12:51:51.771371"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 12:51:51.773506"], ["id", 4]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (8.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: y9noxitqeijr813wackelnqlklub (checksum: ZU7TJ/IALb+pBSV8Zsk84w==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 516a7d11-ba94-4eb8-91e7-e63b5db99226) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007efebc3a9c30 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/2>>
Completed 204 No Content in 129ms (ActiveRecord: 11.1ms | Allocations: 38983)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [516a7d11-ba94-4eb8-91e7-e63b5db99226] Performing ActiveStorage::AnalyzeJob (Job ID: 516a7d11-ba94-4eb8-91e7-e63b5db99226) from Async(active_storage_analysis) enqueued at 2020-03-19T12:51:51Z with arguments: #<GlobalID:0x00007efe9c0609e0 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/2>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [516a7d11-ba94-4eb8-91e7-e63b5db99226] [36m  Disk Storage (0.5ms) [0m[34mDownloaded file from key: y9noxitqeijr813wackelnqlklub[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [516a7d11-ba94-4eb8-91e7-e63b5db99226] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [516a7d11-ba94-4eb8-91e7-e63b5db99226]   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [516a7d11-ba94-4eb8-91e7-e63b5db99226]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [516a7d11-ba94-4eb8-91e7-e63b5db99226]   [1m[35m (9.7ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [516a7d11-ba94-4eb8-91e7-e63b5db99226] Performed ActiveStorage::AnalyzeJob (Job ID: 516a7d11-ba94-4eb8-91e7-e63b5db99226) from Async(active_storage_analysis) in 20.41ms
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:01:00 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00005654cfc283d0 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-31468-ibuak9.jpeg>, @original_filename="rails.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"rails.jpeg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (1.0ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:03:08.819169"], ["updated_at", "2020-03-19 14:03:08.819169"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "o417dqv7lr69n3np2qm32m480vem"], ["filename", "rails.jpeg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 210360], ["checksum", "ZU7TJ/IALb+pBSV8Zsk84w=="], ["created_at", "2020-03-19 14:03:08.843364"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 5], ["blob_id", 3], ["created_at", "2020-03-19 14:03:08.853894"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:03:08.862552"], ["id", 5]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (7.6ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (1.8ms) [0m[32mUploaded file to key: o417dqv7lr69n3np2qm32m480vem (checksum: ZU7TJ/IALb+pBSV8Zsk84w==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 3f7fa198-7965-4b3b-829c-512e41686f9c) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00005654d178f330 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/3>>
Completed 204 No Content in 128822ms (ActiveRecord: 14.9ms | Allocations: 174898)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3f7fa198-7965-4b3b-829c-512e41686f9c] Performing ActiveStorage::AnalyzeJob (Job ID: 3f7fa198-7965-4b3b-829c-512e41686f9c) from Async(active_storage_analysis) enqueued at 2020-03-19T14:03:08Z with arguments: #<GlobalID:0x00005654d1a17300 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/3>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [3f7fa198-7965-4b3b-829c-512e41686f9c] [36m  Disk Storage (0.4ms) [0m[34mDownloaded file from key: o417dqv7lr69n3np2qm32m480vem[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3f7fa198-7965-4b3b-829c-512e41686f9c]   [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3f7fa198-7965-4b3b-829c-512e41686f9c]   [1m[36mActiveStorage::Blob Update (0.5ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":1200,\"height\":709,\"analyzed\":true}"], ["id", 3]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3f7fa198-7965-4b3b-829c-512e41686f9c]   [1m[35m (3.5ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3f7fa198-7965-4b3b-829c-512e41686f9c] Performed ActiveStorage::AnalyzeJob (Job ID: 3f7fa198-7965-4b3b-829c-512e41686f9c) from Async(active_storage_analysis) in 1139.34ms
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:10:39 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f8e1c265230 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-2430-14u0g8t.jpeg>, @original_filename="rails.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"rails.jpeg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:10:39.953516"], ["updated_at", "2020-03-19 14:10:39.953516"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "cevpcmtwkn6r61iuarfsxf9nejwk"], ["filename", "rails.jpeg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 210360], ["checksum", "ZU7TJ/IALb+pBSV8Zsk84w=="], ["created_at", "2020-03-19 14:10:39.961798"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 6], ["blob_id", 4], ["created_at", "2020-03-19 14:10:39.964162"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:10:39.966112"], ["id", 6]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (3.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (1.0ms) [0m[32mUploaded file to key: cevpcmtwkn6r61iuarfsxf9nejwk (checksum: ZU7TJ/IALb+pBSV8Zsk84w==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 7fb90f74-bf4b-4737-a677-cf0de1e36a42) to Async(active_storage_analysis) with arguments: #<GlobalID:0x0000556cd0c0ccf8 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/4>>
Completed 204 No Content in 63ms (ActiveRecord: 6.1ms | Allocations: 46091)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7fb90f74-bf4b-4737-a677-cf0de1e36a42] Performing ActiveStorage::AnalyzeJob (Job ID: 7fb90f74-bf4b-4737-a677-cf0de1e36a42) from Async(active_storage_analysis) enqueued at 2020-03-19T14:10:39Z with arguments: #<GlobalID:0x0000556cd02cfb18 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/4>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [7fb90f74-bf4b-4737-a677-cf0de1e36a42] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: cevpcmtwkn6r61iuarfsxf9nejwk[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7fb90f74-bf4b-4737-a677-cf0de1e36a42]   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7fb90f74-bf4b-4737-a677-cf0de1e36a42]   [1m[36mActiveStorage::Blob Update (0.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":1200,\"height\":709,\"analyzed\":true}"], ["id", 4]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7fb90f74-bf4b-4737-a677-cf0de1e36a42]   [1m[35m (7.0ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7fb90f74-bf4b-4737-a677-cf0de1e36a42] Performed ActiveStorage::AnalyzeJob (Job ID: 7fb90f74-bf4b-4737-a677-cf0de1e36a42) from Async(active_storage_analysis) in 183.95ms
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:13:11 -0300
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f8e08023b20 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-2430-1tdikzr.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.6ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:13:11.309369"], ["updated_at", "2020-03-19 14:13:11.309369"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "f3tpa7zy04kc4c795up297jmhv5m"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 14:13:11.319102"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 7], ["blob_id", 5], ["created_at", "2020-03-19 14:13:11.321169"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:13:11.322787"], ["id", 7]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (8.0ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: f3tpa7zy04kc4c795up297jmhv5m (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: f2459f6e-6e44-430b-a99a-ee99df2a5e0a) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007f8e080e1288 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/5>>
Completed 204 No Content in 31ms (ActiveRecord: 9.4ms | Allocations: 8721)


  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [f2459f6e-6e44-430b-a99a-ee99df2a5e0a] Performing ActiveStorage::AnalyzeJob (Job ID: f2459f6e-6e44-430b-a99a-ee99df2a5e0a) from Async(active_storage_analysis) enqueued at 2020-03-19T14:13:11Z with arguments: #<GlobalID:0x00007f8e080eb5f8 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/5>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [f2459f6e-6e44-430b-a99a-ee99df2a5e0a] [36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: f3tpa7zy04kc4c795up297jmhv5m[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f2459f6e-6e44-430b-a99a-ee99df2a5e0a]   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f2459f6e-6e44-430b-a99a-ee99df2a5e0a]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":100,\"height\":68,\"analyzed\":true}"], ["id", 5]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [f2459f6e-6e44-430b-a99a-ee99df2a5e0a]   [1m[35m (7.0ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f2459f6e-6e44-430b-a99a-ee99df2a5e0a] Performed ActiveStorage::AnalyzeJob (Job ID: f2459f6e-6e44-430b-a99a-ee99df2a5e0a) from Async(active_storage_analysis) in 26.64ms
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:33:24 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007efde88a3e68 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-6436-6z4rra.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
Completed 500 Internal Server Error in 2614ms (ActiveRecord: 0.0ms | Allocations: 11993)


  
NameError (undefined local variable or method `befo' for #<Class:0x0000564e64eb1fa0>):
  
app/models/image.rb:8:in `<class:Image>'
app/models/image.rb:1:in `<main>'
app/controllers/image_controller.rb:11:in `save'
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:33:59 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x000055d1ca881bb0 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-6939-1uvrl5k.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:34:01.219818"], ["updated_at", "2020-03-19 14:34:01.219818"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "05ngwe91xla9odoawstmuqgyz67t"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 14:34:01.243912"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 8], ["blob_id", 6], ["created_at", "2020-03-19 14:34:01.253744"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:34:01.261681"], ["id", 8]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (7.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (1.9ms) [0m[32mUploaded file to key: 05ngwe91xla9odoawstmuqgyz67t (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: f4922136-9977-4c60-85a4-2ccabdad80aa) to Async(active_storage_analysis) with arguments: #<GlobalID:0x000055d1ca4712c8 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/6>>
Completed 204 No Content in 2181ms (ActiveRecord: 13.7ms | Allocations: 52808)


  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [f4922136-9977-4c60-85a4-2ccabdad80aa] Performing ActiveStorage::AnalyzeJob (Job ID: f4922136-9977-4c60-85a4-2ccabdad80aa) from Async(active_storage_analysis) enqueued at 2020-03-19T14:34:01Z with arguments: #<GlobalID:0x000055d1ca41d808 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/6>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [f4922136-9977-4c60-85a4-2ccabdad80aa] [36m  Disk Storage (0.4ms) [0m[34mDownloaded file from key: 05ngwe91xla9odoawstmuqgyz67t[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f4922136-9977-4c60-85a4-2ccabdad80aa] Error performing ActiveStorage::AnalyzeJob (Job ID: f4922136-9977-4c60-85a4-2ccabdad80aa) from Async(active_storage_analysis) in 3891.09ms: NameError (uninitialized constant ActiveStorage::Analyzer::ImageAnalyzer::EXIFR):
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:25:in `metadata_from_exifr'
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:12:in `block in metadata'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer/image_analyzer.rb:37:in `block in read_image'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:15:in `block in open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:24:in `open_tempfile'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:12:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/service.rb:86:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob.rb:219:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer.rb:27:in `download_blob_to_tempfile'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer/image_analyzer.rb:32:in `read_image'
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:7:in `metadata'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob/analyzable.rb:47:in `extract_metadata_via_analyzer'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob/analyzable.rb:29:in `analyze'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/jobs/active_storage/analyze_job.rb:11:in `perform'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:39:in `block in perform_now'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/i18n-1.8.2/lib/i18n.rb:313:in `with_locale'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications.rb:180:in `block in instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications.rb:180:in `instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:45:in `tag_logger'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:38:in `perform_now'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:24:in `block in execute'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/reloader.rb:72:in `block in wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/reloader.rb:71:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:22:in `execute'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:353:in `run_task'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:342:in `block (3 levels) in create_worker'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:325:in `loop'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:325:in `block (2 levels) in create_worker'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:324:in `catch'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:324:in `block in create_worker'
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:34:25 -0300
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f4e38037310 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-6939-vvenny.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:34:25.777396"], ["updated_at", "2020-03-19 14:34:25.777396"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "8xnqrxz20tir1kgxv7wd52j6qado"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 14:34:25.805190"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 9], ["blob_id", 7], ["created_at", "2020-03-19 14:34:25.815030"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:34:25.823402"], ["id", 9]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (5.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (1.7ms) [0m[32mUploaded file to key: 8xnqrxz20tir1kgxv7wd52j6qado (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: c9039e24-0a19-40ed-bece-5693b9da948a) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007f4e38135f50 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/7>>
Completed 204 No Content in 94ms (ActiveRecord: 7.8ms | Allocations: 10179)


  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c9039e24-0a19-40ed-bece-5693b9da948a] Performing ActiveStorage::AnalyzeJob (Job ID: c9039e24-0a19-40ed-bece-5693b9da948a) from Async(active_storage_analysis) enqueued at 2020-03-19T14:34:25Z with arguments: #<GlobalID:0x00007f4e1c8a3c68 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/7>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [c9039e24-0a19-40ed-bece-5693b9da948a] [36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: 8xnqrxz20tir1kgxv7wd52j6qado[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c9039e24-0a19-40ed-bece-5693b9da948a] Error performing ActiveStorage::AnalyzeJob (Job ID: c9039e24-0a19-40ed-bece-5693b9da948a) from Async(active_storage_analysis) in 35882.28ms: NameError (uninitialized constant ActiveStorage::Analyzer::ImageAnalyzer::EXIFR):
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:25:in `metadata_from_exifr'
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:12:in `block in metadata'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer/image_analyzer.rb:37:in `block in read_image'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:15:in `block in open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:24:in `open_tempfile'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:12:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/service.rb:86:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob.rb:219:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer.rb:27:in `download_blob_to_tempfile'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer/image_analyzer.rb:32:in `read_image'
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:7:in `metadata'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob/analyzable.rb:47:in `extract_metadata_via_analyzer'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob/analyzable.rb:29:in `analyze'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/jobs/active_storage/analyze_job.rb:11:in `perform'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:39:in `block in perform_now'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/i18n-1.8.2/lib/i18n.rb:313:in `with_locale'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications.rb:180:in `block in instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications.rb:180:in `instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:45:in `tag_logger'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:38:in `perform_now'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:24:in `block in execute'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/reloader.rb:72:in `block in wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/reloader.rb:71:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:22:in `execute'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:353:in `run_task'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:342:in `block (3 levels) in create_worker'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:325:in `loop'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:325:in `block (2 levels) in create_worker'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:324:in `catch'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:324:in `block in create_worker'
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:36:06 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f21589feae0 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-7368-1h7s3cp.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:36:08.904017"], ["updated_at", "2020-03-19 14:36:08.904017"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "z8z9benaojqf6308luilr257y7di"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 14:36:08.931786"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 10], ["blob_id", 8], ["created_at", "2020-03-19 14:36:08.943930"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:36:08.952667"], ["id", 10]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (3.6ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (2.4ms) [0m[32mUploaded file to key: z8z9benaojqf6308luilr257y7di (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: e0d15e00-dbd3-41d9-930f-2121a4eaf251) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007f2158e0df78 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/8>>
Completed 204 No Content in 2162ms (ActiveRecord: 10.9ms | Allocations: 52786)


  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0d15e00-dbd3-41d9-930f-2121a4eaf251] Performing ActiveStorage::AnalyzeJob (Job ID: e0d15e00-dbd3-41d9-930f-2121a4eaf251) from Async(active_storage_analysis) enqueued at 2020-03-19T14:36:09Z with arguments: #<GlobalID:0x00007f212c04b510 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/8>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0d15e00-dbd3-41d9-930f-2121a4eaf251] [36m  Disk Storage (0.8ms) [0m[34mDownloaded file from key: z8z9benaojqf6308luilr257y7di[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0d15e00-dbd3-41d9-930f-2121a4eaf251] Skipping image analysis because the mini_magick gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0d15e00-dbd3-41d9-930f-2121a4eaf251]   [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0d15e00-dbd3-41d9-930f-2121a4eaf251]   [1m[36mActiveStorage::Blob Update (0.5ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0d15e00-dbd3-41d9-930f-2121a4eaf251]   [1m[35m (5.6ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e0d15e00-dbd3-41d9-930f-2121a4eaf251] Performed ActiveStorage::AnalyzeJob (Job ID: e0d15e00-dbd3-41d9-930f-2121a4eaf251) from Async(active_storage_analysis) in 9365.87ms
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:36:40 -0300
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f214802e908 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-7368-z3e679.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.6ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:36:41.256315"], ["updated_at", "2020-03-19 14:36:41.256315"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 11], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "m83o2wsrcbgbrrkdir2v2oi0aieq"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 14:36:41.282449"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 11], ["blob_id", 9], ["created_at", "2020-03-19 14:36:41.294164"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.6ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:36:41.303358"], ["id", 11]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (7.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (2.0ms) [0m[32mUploaded file to key: m83o2wsrcbgbrrkdir2v2oi0aieq (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 5f4990f1-edb2-460e-bf06-2278b3f6a20e) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007f212cb3f728 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/9>>
Completed 204 No Content in 1266ms (ActiveRecord: 9.8ms | Allocations: 15265)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [5f4990f1-edb2-460e-bf06-2278b3f6a20e] Performing ActiveStorage::AnalyzeJob (Job ID: 5f4990f1-edb2-460e-bf06-2278b3f6a20e) from Async(active_storage_analysis) enqueued at 2020-03-19T14:36:41Z with arguments: #<GlobalID:0x00007f212cb8f5e8 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/9>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [5f4990f1-edb2-460e-bf06-2278b3f6a20e] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: m83o2wsrcbgbrrkdir2v2oi0aieq[0m
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:37:22 -0300
  [1m[35m (1.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f8d609c78c8 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-7676-1birt10.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:37:28.096336"], ["updated_at", "2020-03-19 14:37:28.096336"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "zfbo5jf61gl999058th73xsx1kes"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 14:37:28.120893"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 12], ["blob_id", 10], ["created_at", "2020-03-19 14:37:28.131535"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:37:28.139760"], ["id", 12]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (6.9ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (2.2ms) [0m[32mUploaded file to key: zfbo5jf61gl999058th73xsx1kes (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d648640b-9205-409f-8716-461a26d81355) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007f8d60dbd680 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/10>>
Completed 204 No Content in 5188ms (ActiveRecord: 13.2ms | Allocations: 52802)


  [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [d648640b-9205-409f-8716-461a26d81355] Performing ActiveStorage::AnalyzeJob (Job ID: d648640b-9205-409f-8716-461a26d81355) from Async(active_storage_analysis) enqueued at 2020-03-19T14:37:28Z with arguments: #<GlobalID:0x00007f8d3c070050 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/10>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [d648640b-9205-409f-8716-461a26d81355] [36m  Disk Storage (0.4ms) [0m[34mDownloaded file from key: zfbo5jf61gl999058th73xsx1kes[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d648640b-9205-409f-8716-461a26d81355] Error performing ActiveStorage::AnalyzeJob (Job ID: d648640b-9205-409f-8716-461a26d81355) from Async(active_storage_analysis) in 18546.63ms: NameError (uninitialized constant ActiveStorage::Analyzer::ImageAnalyzer::EXIFR):
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:25:in `metadata_from_exifr'
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:12:in `block in metadata'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer/image_analyzer.rb:37:in `block in read_image'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:15:in `block in open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:24:in `open_tempfile'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:12:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/service.rb:86:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob.rb:219:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer.rb:27:in `download_blob_to_tempfile'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer/image_analyzer.rb:32:in `read_image'
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:7:in `metadata'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob/analyzable.rb:47:in `extract_metadata_via_analyzer'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob/analyzable.rb:29:in `analyze'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/jobs/active_storage/analyze_job.rb:11:in `perform'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:39:in `block in perform_now'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/i18n-1.8.2/lib/i18n.rb:313:in `with_locale'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications.rb:180:in `block in instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications.rb:180:in `instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:45:in `tag_logger'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:38:in `perform_now'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:24:in `block in execute'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/reloader.rb:72:in `block in wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/reloader.rb:71:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:22:in `execute'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:353:in `run_task'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:342:in `block (3 levels) in create_worker'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:325:in `loop'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:325:in `block (2 levels) in create_worker'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:324:in `catch'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:324:in `block in create_worker'
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:45:34 -0300
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007feafca07ca8 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-11419-1yn2njt.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:45:36.331250"], ["updated_at", "2020-03-19 14:45:36.331250"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "z82urb54sbg8p3j2793ybqvfd5za"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 14:45:36.363697"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 13], ["blob_id", 11], ["created_at", "2020-03-19 14:45:36.373195"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:45:36.381925"], ["id", 13]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (4.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: z82urb54sbg8p3j2793ybqvfd5za (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 3cf6e9e6-9876-4f1e-b865-a7944aeae380) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007feafce11e70 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/11>>
Completed 204 No Content in 2014ms (ActiveRecord: 10.7ms | Allocations: 52706)


  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3cf6e9e6-9876-4f1e-b865-a7944aeae380] Performing ActiveStorage::AnalyzeJob (Job ID: 3cf6e9e6-9876-4f1e-b865-a7944aeae380) from Async(active_storage_analysis) enqueued at 2020-03-19T14:45:36Z with arguments: #<GlobalID:0x0000561a2dee8bd8 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/11>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [3cf6e9e6-9876-4f1e-b865-a7944aeae380] [36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: z82urb54sbg8p3j2793ybqvfd5za[0m
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:47:14 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fbb889dc448 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-11668-1mfpkde.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.7ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:47:17.278523"], ["updated_at", "2020-03-19 14:47:17.278523"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "fpmtsu36bzl5mhp0jjnkm91bef62"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 14:47:17.300283"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 14], ["blob_id", 12], ["created_at", "2020-03-19 14:47:17.309343"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:47:17.316706"], ["id", 14]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (7.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (1.9ms) [0m[32mUploaded file to key: fpmtsu36bzl5mhp0jjnkm91bef62 (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 04d1559c-d5b0-46b9-9c23-be5b50e0a844) to Async(active_storage_analysis) with arguments: #<GlobalID:0x000055d14b91b488 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/12>>
Completed 204 No Content in 2702ms (ActiveRecord: 13.6ms | Allocations: 52852)


  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [04d1559c-d5b0-46b9-9c23-be5b50e0a844] Performing ActiveStorage::AnalyzeJob (Job ID: 04d1559c-d5b0-46b9-9c23-be5b50e0a844) from Async(active_storage_analysis) enqueued at 2020-03-19T14:47:17Z with arguments: #<GlobalID:0x00007fbb6004fd30 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/12>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [04d1559c-d5b0-46b9-9c23-be5b50e0a844] [36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: fpmtsu36bzl5mhp0jjnkm91bef62[0m
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:49:26 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f5b3499ef08 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-12050-ylylyd.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:49:26.718927"], ["updated_at", "2020-03-19 14:49:26.718927"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 15], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "oqwtritbvft1fvkfbdkbhs38wgyp"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 14:49:26.725869"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 15], ["blob_id", 13], ["created_at", "2020-03-19 14:49:26.728483"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:49:26.731676"], ["id", 15]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (6.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: oqwtritbvft1fvkfbdkbhs38wgyp (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 87b4f225-1546-4e9a-bbe7-a862480e76c1) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007f5b34d34be0 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/13>>
Completed 204 No Content in 71ms (ActiveRecord: 9.5ms | Allocations: 46545)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [87b4f225-1546-4e9a-bbe7-a862480e76c1] Performing ActiveStorage::AnalyzeJob (Job ID: 87b4f225-1546-4e9a-bbe7-a862480e76c1) from Async(active_storage_analysis) enqueued at 2020-03-19T14:49:26Z with arguments: #<GlobalID:0x00007f5b04059e50 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/13>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [87b4f225-1546-4e9a-bbe7-a862480e76c1] [36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: oqwtritbvft1fvkfbdkbhs38wgyp[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [87b4f225-1546-4e9a-bbe7-a862480e76c1] Error performing ActiveStorage::AnalyzeJob (Job ID: 87b4f225-1546-4e9a-bbe7-a862480e76c1) from Async(active_storage_analysis) in 181.65ms: TypeError (no implicit conversion of Exif::Data into Hash):
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:9:in `merge'
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:9:in `block in metadata'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer/image_analyzer.rb:37:in `block in read_image'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:15:in `block in open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:24:in `open_tempfile'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:12:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/service.rb:86:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob.rb:219:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer.rb:27:in `download_blob_to_tempfile'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer/image_analyzer.rb:32:in `read_image'
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:4:in `metadata'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob/analyzable.rb:47:in `extract_metadata_via_analyzer'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob/analyzable.rb:29:in `analyze'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/jobs/active_storage/analyze_job.rb:11:in `perform'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:39:in `block in perform_now'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/i18n-1.8.2/lib/i18n.rb:313:in `with_locale'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications.rb:180:in `block in instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications.rb:180:in `instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:45:in `tag_logger'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:38:in `perform_now'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:24:in `block in execute'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/reloader.rb:72:in `block in wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/reloader.rb:71:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:22:in `execute'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:353:in `run_task'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:342:in `block (3 levels) in create_worker'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:325:in `loop'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:325:in `block (2 levels) in create_worker'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:324:in `catch'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:324:in `block in create_worker'
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:51:30 -0300
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f5b240326f0 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-12050-9j1keh.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:51:30.548154"], ["updated_at", "2020-03-19 14:51:30.548154"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 16], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "mhhpzvoxdwugltzstj324g45es9p"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 14:51:30.567753"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 16], ["blob_id", 14], ["created_at", "2020-03-19 14:51:30.576508"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:51:30.583557"], ["id", 16]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (8.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (1.7ms) [0m[32mUploaded file to key: mhhpzvoxdwugltzstj324g45es9p (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 1c28fb53-0e10-4ef1-8f8e-016becd36bca) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007f5b048062e8 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/14>>
Completed 204 No Content in 78ms (ActiveRecord: 10.2ms | Allocations: 9675)


  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c28fb53-0e10-4ef1-8f8e-016becd36bca] Performing ActiveStorage::AnalyzeJob (Job ID: 1c28fb53-0e10-4ef1-8f8e-016becd36bca) from Async(active_storage_analysis) enqueued at 2020-03-19T14:51:30Z with arguments: #<GlobalID:0x00007f5b0482c858 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/14>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c28fb53-0e10-4ef1-8f8e-016becd36bca] [36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: mhhpzvoxdwugltzstj324g45es9p[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c28fb53-0e10-4ef1-8f8e-016becd36bca] Error performing ActiveStorage::AnalyzeJob (Job ID: 1c28fb53-0e10-4ef1-8f8e-016becd36bca) from Async(active_storage_analysis) in 25.28ms: TypeError (no implicit conversion of Exif::Data into Hash):
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:9:in `merge'
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:9:in `block in metadata'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer/image_analyzer.rb:37:in `block in read_image'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:15:in `block in open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:24:in `open_tempfile'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/downloader.rb:12:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/service.rb:86:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob.rb:219:in `open'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer.rb:27:in `download_blob_to_tempfile'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/lib/active_storage/analyzer/image_analyzer.rb:32:in `read_image'
/home/ricardo/git/vai-code-challenges/src/image_service/config/initializers/exif.rb:4:in `metadata'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob/analyzable.rb:47:in `extract_metadata_via_analyzer'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/models/active_storage/blob/analyzable.rb:29:in `analyze'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activestorage-6.0.2.1/app/jobs/active_storage/analyze_job.rb:11:in `perform'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:39:in `block in perform_now'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/i18n-1.8.2/lib/i18n.rb:313:in `with_locale'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications.rb:180:in `block in instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/notifications.rb:180:in `instrument'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:45:in `tag_logger'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:38:in `perform_now'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:24:in `block in execute'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/reloader.rb:72:in `block in wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/reloader.rb:71:in `wrap'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activesupport-6.0.2.1/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/execution.rb:22:in `execute'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/activejob-6.0.2.1/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:353:in `run_task'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:342:in `block (3 levels) in create_worker'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:325:in `loop'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:325:in `block (2 levels) in create_worker'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:324:in `catch'
/home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/concurrent-ruby-1.1.6/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:324:in `block in create_worker'
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:51:38 -0300
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f5b3c025b68 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-12050-ac6zdo.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:51:38.457574"], ["updated_at", "2020-03-19 14:51:38.457574"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "5f76cida1dpv7c27ae942pthuzad"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 14:51:38.477660"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 17], ["blob_id", 15], ["created_at", "2020-03-19 14:51:38.485694"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:51:38.492234"], ["id", 17]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (3.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: 5f76cida1dpv7c27ae942pthuzad (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d6a06f36-d24e-488f-b5d3-015b31fa3dc0) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007f5b04873460 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/15>>
Completed 204 No Content in 63ms (ActiveRecord: 5.5ms | Allocations: 9487)


  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [d6a06f36-d24e-488f-b5d3-015b31fa3dc0] Performing ActiveStorage::AnalyzeJob (Job ID: d6a06f36-d24e-488f-b5d3-015b31fa3dc0) from Async(active_storage_analysis) enqueued at 2020-03-19T14:51:38Z with arguments: #<GlobalID:0x00007f5b04889198 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/15>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [d6a06f36-d24e-488f-b5d3-015b31fa3dc0] [36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: 5f76cida1dpv7c27ae942pthuzad[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d6a06f36-d24e-488f-b5d3-015b31fa3dc0] [36m  Disk Storage (0.4ms) [0m[34mDownloaded file from key: 5f76cida1dpv7c27ae942pthuzad[0m
Started POST "/images" for 127.0.0.1 at 2020-03-19 11:52:26 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f184c9885a8 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-12678-1rwm8in.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 14:52:26.157961"], ["updated_at", "2020-03-19 14:52:26.157961"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 18], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "mr21u59r0sk56zna2g807yuqpmcy"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 14:52:26.165925"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 18], ["blob_id", 16], ["created_at", "2020-03-19 14:52:26.168418"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 14:52:26.171161"], ["id", 18]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (4.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: mr21u59r0sk56zna2g807yuqpmcy (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: e8bac1cc-de62-494e-a343-2a57151313ff) to Async(active_storage_analysis) with arguments: #<GlobalID:0x000055949391f848 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/16>>
Completed 204 No Content in 63ms (ActiveRecord: 6.9ms | Allocations: 46062)


  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e8bac1cc-de62-494e-a343-2a57151313ff] Performing ActiveStorage::AnalyzeJob (Job ID: e8bac1cc-de62-494e-a343-2a57151313ff) from Async(active_storage_analysis) enqueued at 2020-03-19T14:52:26Z with arguments: #<GlobalID:0x00007f1828033b98 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/16>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [e8bac1cc-de62-494e-a343-2a57151313ff] [36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: mr21u59r0sk56zna2g807yuqpmcy[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e8bac1cc-de62-494e-a343-2a57151313ff]   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e8bac1cc-de62-494e-a343-2a57151313ff]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":100,\"height\":68,\"ifd0\":{\"make\":\"Canon\",\"model\":\"Canon EOS 40D\",\"orientation\":1,\"x_resolution\":\"72/1\",\"y_resolution\":\"72/1\",\"resolution_unit\":2,\"software\":\"GIMP 2.4.5\",\"date_time\":\"2008:07:31 10:38:11\",\"ycbcr_positioning\":2},\"ifd1\":{\"compression\":6,\"x_resolution\":\"72/1\",\"y_resolution\":\"72/1\",\"resolution_unit\":2},\"exif\":{\"exposure_time\":\"1/160\",\"fnumber\":\"71/10\",\"exposure_program\":1,\"iso_speed_ratings\":100,\"exif_version\":\"0221\",\"date_time_original\":\"2008:05:30 15:56:01\",\"date_time_digitized\":\"2008:05:30 15:56:01\",\"components_configuration\":\"\\u0001\\u0002\\u0003\\u0000\",\"shutter_speed_value\":\"59/8\",\"aperture_value\":\"45/8\",\"exposure_bias_value\":\"0/1\",\"metering_mode\":5,\"flash\":9,\"focal_length\":\"135/1\",\"user_comment\":\"\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\",\"sub_sec_time\":\"00\",\"sub_sec_time_original\":\"00\",\"sub_sec_time_digitized\":\"00\",\"flash_pix_version\":\"0100\",\"color_space\":1,\"pixel_x_dimension\":100,\"pixel_y_dimension\":68,\"focal_plane_x_resolution\":\"324000/73\",\"focal_plane_y_resolution\":\"2592000/583\",\"focal_plane_resolution_unit\":2,\"custom_rendered\":0,\"exposure_mode\":1,\"white_balance\":0,\"scene_capture_type\":0},\"gps\":{\"gps_version_id\":[2,2,0,0]},\"interoperability\":{\"interoperability_index\":\"R98\",\"interoperability_version\":\"0100\"},\"analyzed\":true}"], ["id", 16]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [e8bac1cc-de62-494e-a343-2a57151313ff]   [1m[35m (5.5ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e8bac1cc-de62-494e-a343-2a57151313ff] Performed ActiveStorage::AnalyzeJob (Job ID: e8bac1cc-de62-494e-a343-2a57151313ff) from Async(active_storage_analysis) in 181.99ms
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 18], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
[36m  Disk Storage (117.9ms) [0m[34mGenerated URL for file at key: mr21u59r0sk56zna2g807yuqpmcy ()[0m
[36m  Disk Storage (0.8ms) [0m[34mGenerated URL for file at key: mr21u59r0sk56zna2g807yuqpmcy ()[0m
[36m  Disk Storage (0.8ms) [0m[34mGenerated URL for file at key: mr21u59r0sk56zna2g807yuqpmcy ()[0m
[36m  Disk Storage (0.8ms) [0m[34mGenerated URL for file at key: mr21u59r0sk56zna2g807yuqpmcy ()[0m
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:00:16 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
Completed 204 No Content in 3ms (ActiveRecord: 0.0ms | Allocations: 1405)


Started GET "/images" for 127.0.0.1 at 2020-03-19 12:02:09 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
SyntaxError (/home/ricardo/git/vai-code-challenges/src/image_service/app/controllers/image_controller.rb:3: syntax error, unexpected local variable or method, expecting `end'
... render json: Image.find params[:id]
...                         ^~~~~~
):
  
app/controllers/image_controller.rb:3: syntax error, unexpected local variable or method, expecting `end'
app/controllers/image_controller.rb:3: syntax error, unexpected local variable or method, expecting `end'
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:02:35 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
Completed 500 Internal Server Error in 22ms (ActiveRecord: 1.0ms | Allocations: 10019)


  
Module::DelegationError (service_url delegated to attachment, but attachment is nil):
  
app/models/image.rb:9:in `url'
app/controllers/image_controller.rb:7:in `all'
  [1m[36mImage Load (0.4ms)[0m  [1m[34mSELECT "images".* FROM "images" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mImage Load (0.4ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  [1m[36mImage Load (0.6ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."attachment" IS NULL LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mImage Load (0.6ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."file" IS NULL LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mImage Load (0.5ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."file" IS NULL LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mImage Destroy (4.9ms)[0m  [1m[31mDELETE FROM "images"[0m
Started POST "/images" for 127.0.0.1 at 2020-03-19 12:04:44 -0300
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f5084079b90 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-14649-v2qxmp.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Awesome Rails", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Awesome Rails"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 15:04:44.596200"], ["updated_at", "2020-03-19 15:04:44.596200"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 19], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "qijycn9j8fzyt7d5agufcng77qgf"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 15:04:44.600899"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 19], ["blob_id", 17], ["created_at", "2020-03-19 15:04:44.602825"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 15:04:44.604317"], ["id", 19]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (3.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: qijycn9j8fzyt7d5agufcng77qgf (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 69331989-7f61-4688-8313-e1eed2c66830) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007f50843b4580 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/17>>
Completed 204 No Content in 46ms (ActiveRecord: 5.4ms | Allocations: 38166)


  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [69331989-7f61-4688-8313-e1eed2c66830] Performing ActiveStorage::AnalyzeJob (Job ID: 69331989-7f61-4688-8313-e1eed2c66830) from Async(active_storage_analysis) enqueued at 2020-03-19T15:04:44Z with arguments: #<GlobalID:0x00007f505c02f5b8 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/17>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [69331989-7f61-4688-8313-e1eed2c66830] [36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: qijycn9j8fzyt7d5agufcng77qgf[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [69331989-7f61-4688-8313-e1eed2c66830]   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [69331989-7f61-4688-8313-e1eed2c66830]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":100,\"height\":68,\"ifd0\":{\"make\":\"Canon\",\"model\":\"Canon EOS 40D\",\"orientation\":1,\"x_resolution\":\"72/1\",\"y_resolution\":\"72/1\",\"resolution_unit\":2,\"software\":\"GIMP 2.4.5\",\"date_time\":\"2008:07:31 10:38:11\",\"ycbcr_positioning\":2},\"ifd1\":{\"compression\":6,\"x_resolution\":\"72/1\",\"y_resolution\":\"72/1\",\"resolution_unit\":2},\"exif\":{\"exposure_time\":\"1/160\",\"fnumber\":\"71/10\",\"exposure_program\":1,\"iso_speed_ratings\":100,\"exif_version\":\"0221\",\"date_time_original\":\"2008:05:30 15:56:01\",\"date_time_digitized\":\"2008:05:30 15:56:01\",\"components_configuration\":\"\\u0001\\u0002\\u0003\\u0000\",\"shutter_speed_value\":\"59/8\",\"aperture_value\":\"45/8\",\"exposure_bias_value\":\"0/1\",\"metering_mode\":5,\"flash\":9,\"focal_length\":\"135/1\",\"user_comment\":\"\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\",\"sub_sec_time\":\"00\",\"sub_sec_time_original\":\"00\",\"sub_sec_time_digitized\":\"00\",\"flash_pix_version\":\"0100\",\"color_space\":1,\"pixel_x_dimension\":100,\"pixel_y_dimension\":68,\"focal_plane_x_resolution\":\"324000/73\",\"focal_plane_y_resolution\":\"2592000/583\",\"focal_plane_resolution_unit\":2,\"custom_rendered\":0,\"exposure_mode\":1,\"white_balance\":0,\"scene_capture_type\":0},\"gps\":{\"gps_version_id\":[2,2,0,0]},\"interoperability\":{\"interoperability_index\":\"R98\",\"interoperability_version\":\"0100\"},\"analyzed\":true}"], ["id", 17]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [69331989-7f61-4688-8313-e1eed2c66830]   [1m[35m (3.9ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [69331989-7f61-4688-8313-e1eed2c66830] Performed ActiveStorage::AnalyzeJob (Job ID: 69331989-7f61-4688-8313-e1eed2c66830) from Async(active_storage_analysis) in 106.31ms
Started POST "/images" for 127.0.0.1 at 2020-03-19 12:04:58 -0300
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f507c023d10 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-14649-d8ddot.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Iguana", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.8ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Iguana"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 15:04:58.493217"], ["updated_at", "2020-03-19 15:04:58.493217"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 20], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "6t2y8oafs7bxyxjzg8dnmrcbxbgx"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 15:04:58.499177"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 20], ["blob_id", 18], ["created_at", "2020-03-19 15:04:58.501094"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 15:04:58.502688"], ["id", 20]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (3.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: 6t2y8oafs7bxyxjzg8dnmrcbxbgx (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 8f8e0726-e26a-42fe-80e6-528e4c6c5634) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007f507c0dd6e8 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/18>>
Completed 204 No Content in 19ms (ActiveRecord: 4.8ms | Allocations: 8701)


  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8f8e0726-e26a-42fe-80e6-528e4c6c5634] Performing ActiveStorage::AnalyzeJob (Job ID: 8f8e0726-e26a-42fe-80e6-528e4c6c5634) from Async(active_storage_analysis) enqueued at 2020-03-19T15:04:58Z with arguments: #<GlobalID:0x00007f505c834010 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/18>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [8f8e0726-e26a-42fe-80e6-528e4c6c5634] [36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 6t2y8oafs7bxyxjzg8dnmrcbxbgx[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8f8e0726-e26a-42fe-80e6-528e4c6c5634]   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8f8e0726-e26a-42fe-80e6-528e4c6c5634]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":100,\"height\":68,\"ifd0\":{\"make\":\"Canon\",\"model\":\"Canon EOS 40D\",\"orientation\":1,\"x_resolution\":\"72/1\",\"y_resolution\":\"72/1\",\"resolution_unit\":2,\"software\":\"GIMP 2.4.5\",\"date_time\":\"2008:07:31 10:38:11\",\"ycbcr_positioning\":2},\"ifd1\":{\"compression\":6,\"x_resolution\":\"72/1\",\"y_resolution\":\"72/1\",\"resolution_unit\":2},\"exif\":{\"exposure_time\":\"1/160\",\"fnumber\":\"71/10\",\"exposure_program\":1,\"iso_speed_ratings\":100,\"exif_version\":\"0221\",\"date_time_original\":\"2008:05:30 15:56:01\",\"date_time_digitized\":\"2008:05:30 15:56:01\",\"components_configuration\":\"\\u0001\\u0002\\u0003\\u0000\",\"shutter_speed_value\":\"59/8\",\"aperture_value\":\"45/8\",\"exposure_bias_value\":\"0/1\",\"metering_mode\":5,\"flash\":9,\"focal_length\":\"135/1\",\"user_comment\":\"\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\",\"sub_sec_time\":\"00\",\"sub_sec_time_original\":\"00\",\"sub_sec_time_digitized\":\"00\",\"flash_pix_version\":\"0100\",\"color_space\":1,\"pixel_x_dimension\":100,\"pixel_y_dimension\":68,\"focal_plane_x_resolution\":\"324000/73\",\"focal_plane_y_resolution\":\"2592000/583\",\"focal_plane_resolution_unit\":2,\"custom_rendered\":0,\"exposure_mode\":1,\"white_balance\":0,\"scene_capture_type\":0},\"gps\":{\"gps_version_id\":[2,2,0,0]},\"interoperability\":{\"interoperability_index\":\"R98\",\"interoperability_version\":\"0100\"},\"analyzed\":true}"], ["id", 18]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8f8e0726-e26a-42fe-80e6-528e4c6c5634]   [1m[35m (5.7ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8f8e0726-e26a-42fe-80e6-528e4c6c5634] Performed ActiveStorage::AnalyzeJob (Job ID: 8f8e0726-e26a-42fe-80e6-528e4c6c5634) from Async(active_storage_analysis) in 30.1ms
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:05:07 -0300
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 19], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
[36m  Disk Storage (1.0ms) [0m[34mGenerated URL for file at key: qijycn9j8fzyt7d5agufcng77qgf ()[0m
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.6ms | Allocations: 2957)


  
URI::InvalidURIError (bad URI(is not URI?): nil):
  
app/models/image.rb:9:in `url'
app/controllers/image_controller.rb:7:in `all'
  [1m[36mImage Destroy (5.9ms)[0m  [1m[31mDELETE FROM "images"[0m
Started POST "/images" for 127.0.0.1 at 2020-03-19 12:05:49 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x000055c0828f29b8 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-15242-1b4d85m.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Iguana", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Iguana"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 15:05:49.680596"], ["updated_at", "2020-03-19 15:05:49.680596"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "6ctwkzk1lfzj36tzx3nirxttokri"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 15:05:49.686905"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 21], ["blob_id", 19], ["created_at", "2020-03-19 15:05:49.689011"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 15:05:49.690770"], ["id", 21]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (3.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: 6ctwkzk1lfzj36tzx3nirxttokri (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 1c99525c-93c8-4d28-816f-29e648a7945b) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007f30b09a02d0 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/19>>
Completed 204 No Content in 100ms (ActiveRecord: 5.8ms | Allocations: 46096)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c99525c-93c8-4d28-816f-29e648a7945b] Performing ActiveStorage::AnalyzeJob (Job ID: 1c99525c-93c8-4d28-816f-29e648a7945b) from Async(active_storage_analysis) enqueued at 2020-03-19T15:05:49Z with arguments: #<GlobalID:0x00007f308c062818 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/19>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c99525c-93c8-4d28-816f-29e648a7945b] [36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 6ctwkzk1lfzj36tzx3nirxttokri[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c99525c-93c8-4d28-816f-29e648a7945b]   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c99525c-93c8-4d28-816f-29e648a7945b]   [1m[36mActiveStorage::Blob Update (0.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":100,\"height\":68,\"analyzed\":true}"], ["id", 19]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c99525c-93c8-4d28-816f-29e648a7945b]   [1m[35m (10.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c99525c-93c8-4d28-816f-29e648a7945b] Performed ActiveStorage::AnalyzeJob (Job ID: 1c99525c-93c8-4d28-816f-29e648a7945b) from Async(active_storage_analysis) in 112.53ms
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:05:55 -0300
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
[36m  Disk Storage (1.2ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri ()[0m
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.5ms | Allocations: 3051)


  
URI::InvalidURIError (bad URI(is not URI?): nil):
  
app/models/image.rb:9:in `url'
app/controllers/image_controller.rb:7:in `all'
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:11:10 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
[36m  Disk Storage (109.1ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri ()[0m
Completed 500 Internal Server Error in 151ms (ActiveRecord: 1.8ms | Allocations: 202671)


  
URI::InvalidURIError (bad URI(is not URI?): nil):
  
app/models/image.rb:9:in `url'
app/controllers/image_controller.rb:7:in `all'
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:14:50 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
[36m  Disk Storage (113.2ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri ()[0m
Completed 500 Internal Server Error in 148ms (ActiveRecord: 1.9ms | Allocations: 200843)


  
URI::InvalidURIError (bad URI(is not URI?): nil):
  
app/models/image.rb:9:in `url'
app/controllers/image_controller.rb:7:in `all'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[36m  Disk Storage (74.9ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri ()[0m
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[36m  Disk Storage (71.5ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri ()[0m
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[36m  Disk Storage (131.3ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObU4wZDJ0NmF6RnNabnBxTXpaMGVuZ3pibWx5ZUhSMGIydHlhUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjIyOjA3LjA4NFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--493911c8c35740835ce2cdfc8f2afd239acb4dda/iguana.jpg?content_type=image%2Fjpeg&disposition=inline%3B+filename%3D%22iguana.jpg%22%3B+filename%2A%3DUTF-8%27%27iguana.jpg)[0m
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[36m  Disk Storage (77.2ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObU4wZDJ0NmF6RnNabnBxTXpaMGVuZ3pibWx5ZUhSMGIydHlhUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjIyOjUzLjU3MVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--55bd35126825758471d742e6772a139471fffebb/iguana.jpg?content_type=image%2Fjpeg&disposition=inline%3B+filename%3D%22iguana.jpg%22%3B+filename%2A%3DUTF-8%27%27iguana.jpg)[0m
Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObU4wZDJ0NmF6RnNabnBxTXpaMGVuZ3pibWx5ZUhSMGIydHlhUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjIyOjUzLjU3MVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--55bd35126825758471d742e6772a139471fffebb/iguana.jpg?content_type=image%2Fjpeg&disposition=inline%3B+filename%3D%22iguana.jpg%22%3B+filename%2A%3DUTF-8%27%27iguana.jpg" for ::1 at 2020-03-19 12:17:57 -0300
Processing by ActiveStorage::DiskController#show as JPEG
  Parameters: {"content_type"=>"image/jpeg", "disposition"=>"inline; filename=\"iguana.jpg\"; filename*=UTF-8''iguana.jpg", "encoded_key"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObU4wZDJ0NmF6RnNabnBxTXpaMGVuZ3pibWx5ZUhSMGIydHlhUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjIyOjUzLjU3MVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--55bd35126825758471d742e6772a139471fffebb", "filename"=>"iguana"}
Completed 200 OK in 5ms (ActiveRecord: 0.0ms | Allocations: 5892)


Started GET "/favicon.ico" for ::1 at 2020-03-19 12:17:57 -0300
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (6.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (6.0.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.2.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.2) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.2) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:83:in `call'
railties (6.0.2.1) lib/rails/engine.rb:526:in `call'
puma (4.3.3) lib/puma/configuration.rb:228:in `call'
puma (4.3.3) lib/puma/server.rb:682:in `handle_request'
puma (4.3.3) lib/puma/server.rb:472:in `process_client'
puma (4.3.3) lib/puma/server.rb:328:in `block in run'
puma (4.3.3) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:18:22 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
[36m  Disk Storage (114.9ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri ()[0m
Completed 500 Internal Server Error in 148ms (ActiveRecord: 1.8ms | Allocations: 200872)


  
URI::InvalidURIError (bad URI(is not URI?): nil):
  
app/models/image.rb:9:in `url'
app/controllers/image_controller.rb:7:in `all'
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:21:36 -0300
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.3ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
[36m  Disk Storage (811.6ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri ()[0m
Completed 500 Internal Server Error in 897ms (ActiveRecord: 4.3ms | Allocations: 199892)


  
URI::InvalidURIError (bad URI(is not URI?): nil):
  
app/models/image.rb:9:in `url'
app/controllers/image_controller.rb:7:in `all'
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:22:08 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.3ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
[36m  Disk Storage (104.7ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri ()[0m
Completed 500 Internal Server Error in 2946ms (ActiveRecord: 2.3ms | Allocations: 207313)


  
URI::InvalidURIError (bad URI(is not URI?): nil):
  
app/models/image.rb:9:in `url'
app/controllers/image_controller.rb:7:in `all'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[36m  Disk Storage (74.6ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri ()[0m
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[36m  Disk Storage (77.3ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObU4wZDJ0NmF6RnNabnBxTXpaMGVuZ3pibWx5ZUhSMGIydHlhUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjI3OjUxLjgyMFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--c6751294f6cae9d8e943c70c6a4e391373bc460e/iguana.jpg?content_type=image%2Fjpeg&disposition=inline%3B+filename%3D%22iguana.jpg%22%3B+filename%2A%3DUTF-8%27%27iguana.jpg)[0m
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:23:14 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/image.rb:9:in `url'
[36m  Disk Storage (140.8ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri ()[0m
Completed 500 Internal Server Error in 173ms (ActiveRecord: 1.7ms | Allocations: 200007)


  
URI::InvalidURIError (bad URI(is not URI?): nil):
  
app/models/image.rb:9:in `url'
app/controllers/image_controller.rb:7:in `all'
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:29:15 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.4ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/models/image.rb:11:in `url'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/image.rb:11:in `url'
Completed 500 Internal Server Error in 328695ms (ActiveRecord: 4.5ms | Allocations: 152856)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/models/image.rb:11:in `url'
app/controllers/image_controller.rb:7:in `all'
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:35:06 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/models/image.rb:11:in `url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/image.rb:11:in `url'
Completed 500 Internal Server Error in 42ms (ActiveRecord: 1.7ms | Allocations: 22100)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/models/image.rb:11:in `url'
app/controllers/image_controller.rb:7:in `all'
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:36:55 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/models/image.rb:11:in `url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/image.rb:11:in `url'
Completed 500 Internal Server Error in 34ms (ActiveRecord: 1.9ms | Allocations: 22079)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/models/image.rb:11:in `url'
app/controllers/image_controller.rb:7:in `all'
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:42:43 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (27.82ms)
Completed 200 OK in 47ms (Views: 40.9ms | ActiveRecord: 2.1ms | Allocations: 24537)


Started GET "/images" for 127.0.0.1 at 2020-03-19 12:43:04 -0300
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (20.17ms)
Completed 500 Internal Server Error in 34ms (ActiveRecord: 2.2ms | Allocations: 18107)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/serializers/image_serializer.rb:6:in `url'
app/controllers/image_controller.rb:7:in `all'
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:44:31 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (23.54ms)
Completed 200 OK in 36ms (Views: 31.8ms | ActiveRecord: 1.6ms | Allocations: 23679)


DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:45:06 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (24.22ms)
Completed 500 Internal Server Error in 36ms (ActiveRecord: 1.6ms | Allocations: 24154)


  
NoMethodError (undefined method `variation' for #<ActiveStorage::Attached::One:0x00007f9d10b59b68>):
  
app/serializers/image_serializer.rb:6:in `url'
app/controllers/image_controller.rb:7:in `all'
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:45:36 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] [36m  Disk Storage (72.3ms) [0m[34mGenerated URL for file at key: 6ctwkzk1lfzj36tzx3nirxttokri ()[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (95.36ms)
Completed 500 Internal Server Error in 107ms (ActiveRecord: 1.7ms | Allocations: 201266)


  
URI::InvalidURIError (bad URI(is not URI?): nil):
  
app/serializers/image_serializer.rb:6:in `url'
app/controllers/image_controller.rb:7:in `all'
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:46:34 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as */*
  [1m[36mImage Load (0.4ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 21], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
  [1m[36mImage Destroy (10.3ms)[0m  [1m[31mDELETE FROM "images"[0m
Started POST "/images" for 127.0.0.1 at 2020-03-19 12:47:42 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fdb44c25bd8 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-22854-1qx7fbt.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Iguana", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (1.1ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Iguana"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 15:47:43.183965"], ["updated_at", "2020-03-19 15:47:43.183965"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 22], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "6lyjdwjmx9l5utmptgzidxdtalpy"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 15:47:43.214232"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 22], ["blob_id", 20], ["created_at", "2020-03-19 15:47:43.224406"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.5ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 15:47:43.234006"], ["id", 22]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (4.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (1.5ms) [0m[32mUploaded file to key: 6lyjdwjmx9l5utmptgzidxdtalpy (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 14efb566-ca01-403e-a8ad-ed9afc9825ea) to Async(active_storage_analysis) with arguments: #<GlobalID:0x00007fdb44099f58 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/20>>
Completed 204 No Content in 222ms (ActiveRecord: 11.5ms | Allocations: 47083)


  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [14efb566-ca01-403e-a8ad-ed9afc9825ea] Performing ActiveStorage::AnalyzeJob (Job ID: 14efb566-ca01-403e-a8ad-ed9afc9825ea) from Async(active_storage_analysis) enqueued at 2020-03-19T15:47:43Z with arguments: #<GlobalID:0x0000556ec6752080 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/20>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [14efb566-ca01-403e-a8ad-ed9afc9825ea] [36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: 6lyjdwjmx9l5utmptgzidxdtalpy[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [14efb566-ca01-403e-a8ad-ed9afc9825ea]   [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [14efb566-ca01-403e-a8ad-ed9afc9825ea]   [1m[36mActiveStorage::Blob Update (0.5ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":100,\"height\":68,\"ifd0\":{\"make\":\"Canon\",\"model\":\"Canon EOS 40D\",\"orientation\":1,\"x_resolution\":\"72/1\",\"y_resolution\":\"72/1\",\"resolution_unit\":2,\"software\":\"GIMP 2.4.5\",\"date_time\":\"2008:07:31 10:38:11\",\"ycbcr_positioning\":2},\"ifd1\":{\"compression\":6,\"x_resolution\":\"72/1\",\"y_resolution\":\"72/1\",\"resolution_unit\":2},\"exif\":{\"exposure_time\":\"1/160\",\"fnumber\":\"71/10\",\"exposure_program\":1,\"iso_speed_ratings\":100,\"exif_version\":\"0221\",\"date_time_original\":\"2008:05:30 15:56:01\",\"date_time_digitized\":\"2008:05:30 15:56:01\",\"components_configuration\":\"\\u0001\\u0002\\u0003\\u0000\",\"shutter_speed_value\":\"59/8\",\"aperture_value\":\"45/8\",\"exposure_bias_value\":\"0/1\",\"metering_mode\":5,\"flash\":9,\"focal_length\":\"135/1\",\"user_comment\":\"\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\",\"sub_sec_time\":\"00\",\"sub_sec_time_original\":\"00\",\"sub_sec_time_digitized\":\"00\",\"flash_pix_version\":\"0100\",\"color_space\":1,\"pixel_x_dimension\":100,\"pixel_y_dimension\":68,\"focal_plane_x_resolution\":\"324000/73\",\"focal_plane_y_resolution\":\"2592000/583\",\"focal_plane_resolution_unit\":2,\"custom_rendered\":0,\"exposure_mode\":1,\"white_balance\":0,\"scene_capture_type\":0},\"gps\":{\"gps_version_id\":[2,2,0,0]},\"interoperability\":{\"interoperability_index\":\"R98\",\"interoperability_version\":\"0100\"},\"analyzed\":true}"], ["id", 20]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [14efb566-ca01-403e-a8ad-ed9afc9825ea]   [1m[35m (4.3ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [14efb566-ca01-403e-a8ad-ed9afc9825ea] Performed ActiveStorage::AnalyzeJob (Job ID: 14efb566-ca01-403e-a8ad-ed9afc9825ea) from Async(active_storage_analysis) in 1113.28ms
Started POST "/images" for 127.0.0.1 at 2020-03-19 12:47:49 -0300
Processing by ImageController#save as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x0000556ec5bbcdd8 @tempfile=#<Tempfile:/tmp/RackMultipart20200319-22854-1f7vn9o.jpg>, @original_filename="iguana.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"iguana.jpg\"\r\nContent-Type: image/jpeg\r\n">, "description"=>"Iguana B", "owner"=>"obi-wan-kenobi"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO "images" ("description", "owner", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["description", "Iguana B"], ["owner", "obi-wan-kenobi"], ["created_at", "2020-03-19 15:47:49.389351"], ["updated_at", "2020-03-19 15:47:49.389351"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 23], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["key", "pk192t8nlw7kluhh2d8n5s7b4qce"], ["filename", "iguana.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["byte_size", 7958], ["checksum", "QGlYhArRZl/80b6cKdUVuQ=="], ["created_at", "2020-03-19 15:47:49.412429"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 23], ["blob_id", 21], ["created_at", "2020-03-19 15:47:49.421989"]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = ? WHERE "images"."id" = ?[0m  [["updated_at", "2020-03-19 15:47:49.429948"], ["id", 23]]
  ↳ app/controllers/image_controller.rb:11:in `save'
  [1m[35m (7.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/image_controller.rb:11:in `save'
[36m  Disk Storage (2.2ms) [0m[32mUploaded file to key: pk192t8nlw7kluhh2d8n5s7b4qce (checksum: QGlYhArRZl/80b6cKdUVuQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 1b75591d-f962-4d6a-a2ec-cc6b73115e10) to Async(active_storage_analysis) with arguments: #<GlobalID:0x0000556ec5b5e5f8 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/21>>
Completed 204 No Content in 82ms (ActiveRecord: 9.2ms | Allocations: 9492)


  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 21], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [1b75591d-f962-4d6a-a2ec-cc6b73115e10] Performing ActiveStorage::AnalyzeJob (Job ID: 1b75591d-f962-4d6a-a2ec-cc6b73115e10) from Async(active_storage_analysis) enqueued at 2020-03-19T15:47:49Z with arguments: #<GlobalID:0x0000556ec5b502f0 @uri=#<URI::GID gid://image-service/ActiveStorage::Blob/21>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [1b75591d-f962-4d6a-a2ec-cc6b73115e10] [36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: pk192t8nlw7kluhh2d8n5s7b4qce[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1b75591d-f962-4d6a-a2ec-cc6b73115e10]   [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1b75591d-f962-4d6a-a2ec-cc6b73115e10]   [1m[36mActiveStorage::Blob Update (0.5ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":100,\"height\":68,\"ifd0\":{\"make\":\"Canon\",\"model\":\"Canon EOS 40D\",\"orientation\":1,\"x_resolution\":\"72/1\",\"y_resolution\":\"72/1\",\"resolution_unit\":2,\"software\":\"GIMP 2.4.5\",\"date_time\":\"2008:07:31 10:38:11\",\"ycbcr_positioning\":2},\"ifd1\":{\"compression\":6,\"x_resolution\":\"72/1\",\"y_resolution\":\"72/1\",\"resolution_unit\":2},\"exif\":{\"exposure_time\":\"1/160\",\"fnumber\":\"71/10\",\"exposure_program\":1,\"iso_speed_ratings\":100,\"exif_version\":\"0221\",\"date_time_original\":\"2008:05:30 15:56:01\",\"date_time_digitized\":\"2008:05:30 15:56:01\",\"components_configuration\":\"\\u0001\\u0002\\u0003\\u0000\",\"shutter_speed_value\":\"59/8\",\"aperture_value\":\"45/8\",\"exposure_bias_value\":\"0/1\",\"metering_mode\":5,\"flash\":9,\"focal_length\":\"135/1\",\"user_comment\":\"\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\",\"sub_sec_time\":\"00\",\"sub_sec_time_original\":\"00\",\"sub_sec_time_digitized\":\"00\",\"flash_pix_version\":\"0100\",\"color_space\":1,\"pixel_x_dimension\":100,\"pixel_y_dimension\":68,\"focal_plane_x_resolution\":\"324000/73\",\"focal_plane_y_resolution\":\"2592000/583\",\"focal_plane_resolution_unit\":2,\"custom_rendered\":0,\"exposure_mode\":1,\"white_balance\":0,\"scene_capture_type\":0},\"gps\":{\"gps_version_id\":[2,2,0,0]},\"interoperability\":{\"interoperability_index\":\"R98\",\"interoperability_version\":\"0100\"},\"analyzed\":true}"], ["id", 21]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [1b75591d-f962-4d6a-a2ec-cc6b73115e10]   [1m[35m (8.9ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1b75591d-f962-4d6a-a2ec-cc6b73115e10] Performed ActiveStorage::AnalyzeJob (Job ID: 1b75591d-f962-4d6a-a2ec-cc6b73115e10) from Async(active_storage_analysis) in 66.33ms
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" ORDER BY "images"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 23], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 21], ["LIMIT", 1]]
Started GET "/images" for 127.0.0.1 at 2020-03-19 12:48:22 -0300
Processing by ImageController#all as */*
  [1m[36mImage Load (0.4ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 22], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 23], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 21], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (19102.05ms)
Completed 200 OK in 19133ms (Views: 19130.2ms | ActiveRecord: 1.6ms | Allocations: 32654)


Started GET "/images" for ::1 at 2020-03-19 12:48:55 -0300
Processing by ImageController#all as HTML
  [1m[36mImage Load (0.3ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 22], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 23], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 21], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (37.95ms)
Completed 200 OK in 46ms (Views: 43.4ms | ActiveRecord: 1.3ms | Allocations: 6448)


Started GET "/rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBHUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--221c803e289b0e155e76c48b5d155ca80affae92/iguana.jpg" for ::1 at 2020-03-19 12:49:16 -0300
Processing by ActiveStorage::BlobsController#show as JPEG
  Parameters: {"signed_id"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBHUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--221c803e289b0e155e76c48b5d155ca80affae92", "filename"=>"iguana"}
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
[36m  Disk Storage (3.2ms) [0m[34mGenerated URL for file at key: 6lyjdwjmx9l5utmptgzidxdtalpy (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObXg1YW1SM2FtMTRPV3cxZFhSdGNIUm5lbWxrZUdSMFlXeHdlUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjU0OjE2Ljg2OVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--dd1c0638742a28e5fca85bdf0450abcce1f960ac/iguana.jpg?content_type=image%2Fjpeg&disposition=inline%3B+filename%3D%22iguana.jpg%22%3B+filename%2A%3DUTF-8%27%27iguana.jpg)[0m
Redirected to http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObXg1YW1SM2FtMTRPV3cxZFhSdGNIUm5lbWxrZUdSMFlXeHdlUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjU0OjE2Ljg2OVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--dd1c0638742a28e5fca85bdf0450abcce1f960ac/iguana.jpg?content_type=image%2Fjpeg&disposition=inline%3B+filename%3D%22iguana.jpg%22%3B+filename%2A%3DUTF-8%27%27iguana.jpg
Completed 302 Found in 14ms (ActiveRecord: 0.3ms | Allocations: 2208)


Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObXg1YW1SM2FtMTRPV3cxZFhSdGNIUm5lbWxrZUdSMFlXeHdlUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjU0OjE2Ljg2OVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--dd1c0638742a28e5fca85bdf0450abcce1f960ac/iguana.jpg?content_type=image%2Fjpeg&disposition=inline%3B+filename%3D%22iguana.jpg%22%3B+filename%2A%3DUTF-8%27%27iguana.jpg" for ::1 at 2020-03-19 12:49:16 -0300
Processing by ActiveStorage::DiskController#show as JPEG
  Parameters: {"content_type"=>"image/jpeg", "disposition"=>"inline; filename=\"iguana.jpg\"; filename*=UTF-8''iguana.jpg", "encoded_key"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObXg1YW1SM2FtMTRPV3cxZFhSdGNIUm5lbWxrZUdSMFlXeHdlUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjU0OjE2Ljg2OVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--dd1c0638742a28e5fca85bdf0450abcce1f960ac", "filename"=>"iguana"}
Completed 200 OK in 3ms (ActiveRecord: 0.0ms | Allocations: 2613)


DEPRECATION WARNING: Initialization autoloaded the constant ActiveStorage::Current.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActiveStorage::Current, for example,
the expected changes won't be reflected in that stale Class object.

This autoloaded constant has been unloaded.

Please, check the "Autoloading and Reloading Constants" guide for solutions.
 (called from <main> at /home/ricardo/git/vai-code-challenges/src/image_service/config/environment.rb:5)
Started GET "/images" for ::1 at 2020-03-19 12:51:09 -0300
  [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as HTML
  [1m[36mImage Load (0.4ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 22], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 23], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 21], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (108.71ms)
Completed 200 OK in 150ms (Views: 134.0ms | ActiveRecord: 6.1ms | Allocations: 27226)


Started GET "/images" for ::1 at 2020-03-19 12:51:23 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as HTML
  [1m[36mImage Load (0.4ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 22], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (87.48ms)
Completed 500 Internal Server Error in 128ms (ActiveRecord: 6.5ms | Allocations: 24404)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/serializers/image_serializer.rb:6:in `url'
app/controllers/image_controller.rb:7:in `all'
Started GET "/images" for ::1 at 2020-03-19 12:52:12 -0300
  [1m[35m (1.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as HTML
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 721)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/application_controller.rb:3:in `block in <class:ApplicationController>'
Started GET "/images" for ::1 at 2020-03-19 12:52:39 -0300
Processing by ImageController#all as HTML
Started GET "/images" for ::1 at 2020-03-19 12:53:27 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as HTML
  [1m[36mImage Load (0.4ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 22], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (82.82ms)
Completed 500 Internal Server Error in 2743ms (ActiveRecord: 5.4ms | Allocations: 30419)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/serializers/image_serializer.rb:6:in `url'
app/controllers/image_controller.rb:7:in `all'
Started GET "/images" for ::1 at 2020-03-19 12:54:16 -0300
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ImageController#all as HTML
  [1m[36mImage Load (0.4ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 22], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] [36m  Disk Storage (1061.1ms) [0m[34mGenerated URL for file at key: 6lyjdwjmx9l5utmptgzidxdtalpy (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObXg1YW1SM2FtMTRPV3cxZFhSdGNIUm5lbWxrZUdSMFlXeHdlUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjU5OjE4LjI0NVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--a63c731d6226d8281e7e9d9f27f4642c4ebf1dc4/iguana.jpg?content_type=image%2Fjpeg&disposition=inline%3B+filename%3D%22iguana.jpg%22%3B+filename%2A%3DUTF-8%27%27iguana.jpg)[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 23], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 21], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] [36m  Disk Storage (1.6ms) [0m[34mGenerated URL for file at key: pk192t8nlw7kluhh2d8n5s7b4qce (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhjR3N4T1RKME9HNXNkemRyYkhWb2FESmtPRzQxY3pkaU5IRmpaUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjU5OjE4LjI2NFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--c4d99602a655ea58e9417dd69f16a5c64f991a67/iguana.jpg?content_type=image%2Fjpeg&disposition=inline%3B+filename%3D%22iguana.jpg%22%3B+filename%2A%3DUTF-8%27%27iguana.jpg)[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1168.39ms)
Completed 200 OK in 1210ms (Views: 1194.6ms | ActiveRecord: 6.3ms | Allocations: 208491)


Started GET "/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObXg1YW1SM2FtMTRPV3cxZFhSdGNIUm5lbWxrZUdSMFlXeHdlUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjU5OjE4LjI0NVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--a63c731d6226d8281e7e9d9f27f4642c4ebf1dc4/iguana.jpg?content_type=image%2Fjpeg&disposition=inline%3B+filename%3D%22iguana.jpg%22%3B+filename%2A%3DUTF-8%27%27iguana.jpg" for ::1 at 2020-03-19 12:54:24 -0300
Processing by ActiveStorage::DiskController#show as JPEG
  Parameters: {"content_type"=>"image/jpeg", "disposition"=>"inline; filename=\"iguana.jpg\"; filename*=UTF-8''iguana.jpg", "encoded_key"=>"eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObXg1YW1SM2FtMTRPV3cxZFhSdGNIUm5lbWxrZUdSMFlXeHdlUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE1OjU5OjE4LjI0NVoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--a63c731d6226d8281e7e9d9f27f4642c4ebf1dc4", "filename"=>"iguana"}
Completed 200 OK in 4ms (ActiveRecord: 0.0ms | Allocations: 2699)


Started GET "/" for ::1 at 2020-03-19 13:12:50 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/railties-6.0.2.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/ricardo/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/railties-6.0.2.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 8.8ms | Allocations: 320)
Completed 200 OK in 17ms (Views: 12.3ms | ActiveRecord: 0.0ms | Allocations: 1668)


Started GET "/images" for ::1 at 2020-03-19 13:12:58 -0300
Processing by ImageController#all as HTML
  [1m[36mImage Load (0.6ms)[0m  [1m[34mSELECT "images".* FROM "images"[0m
  ↳ app/controllers/image_controller.rb:7:in `all'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 22], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] [36m  Disk Storage (1.6ms) [0m[34mGenerated URL for file at key: 6lyjdwjmx9l5utmptgzidxdtalpy (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhObXg1YW1SM2FtMTRPV3cxZFhSdGNIUm5lbWxrZUdSMFlXeHdlUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE2OjE3OjU4LjEwMFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--fe2e43646ecb7ba8c9690a48cf952ad0a91f95bf/iguana.jpg?content_type=image%2Fjpeg&disposition=inline%3B+filename%3D%22iguana.jpg%22%3B+filename%2A%3DUTF-8%27%27iguana.jpg)[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 23], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 21], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/serializers/image_serializer.rb:10:in `metadata'
[active_model_serializers] [36m  Disk Storage (2.2ms) [0m[34mGenerated URL for file at key: pk192t8nlw7kluhh2d8n5s7b4qce (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDRG9JYTJWNVNTSWhjR3N4T1RKME9HNXNkemRyYkhWb2FESmtPRzQxY3pkaU5IRmpaUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpUDJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW1sbmRXRnVZUzVxY0djaU95Qm1hV3hsYm1GdFpTbzlWVlJHTFRnbkoybG5kV0Z1WVM1cWNHY0dPd1pVT2hGamIyNTBaVzUwWDNSNWNHVkpJZzlwYldGblpTOXFjR1ZuQmpzR1ZBPT0iLCJleHAiOiIyMDIwLTAzLTE5VDE2OjE3OjU4LjExOFoiLCJwdXIiOiJibG9iX2tleSJ9fQ==--1ee6359a9e9e2abb389d1eafc080ebd6e2fe414c/iguana.jpg?content_type=image%2Fjpeg&disposition=inline%3B+filename%3D%22iguana.jpg%22%3B+filename%2A%3DUTF-8%27%27iguana.jpg)[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (40.71ms)
Completed 200 OK in 48ms (Views: 45.4ms | ActiveRecord: 2.0ms | Allocations: 6236)


